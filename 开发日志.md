# 开发日志

### 2020-8-19
完成生成随机数据模块
完成快速排序算法模块
完成内排序
	当前内排序思想：开启多个线程 

1. 一个用于读取数据
2. 两个用于将读取的数据序列化成正常数据
3. 一个用于将正常数据添加到待排序队列
4. 一个线程监控当前`m.Alloc`当他超过设定值时，开启排序并且写入硬盘

**发现一个小问题。排序结束后并不会自动结束。**
找出原因，忘记结束`ish.memoryManage()`。解决方式：新增`finshAppendData`变量，用于记录数据是否已经读取完毕，并且存入数组。如果为真，我们对其进行最后一次排序，并结束当前程序

发现自身问题，对于内存管理的掌握不够熟练。导致出现当前问题，设定最大内存为`1GB`但每个文本写入不超过`500MB`,甚至有些只有`60MB`。
通过pprof发现，`strings.split` 以及`fmt.Sprintf`这两个函数占用了最多的内存。
![avatar](assets/torch.svg)

明天目标，完成外排序--归并排序。以及思考并学习对内存的管理。
